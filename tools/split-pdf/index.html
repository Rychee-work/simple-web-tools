<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Split PDF — Simple Web Tools</title>
  <meta name="description" content="Split a PDF into pages. Processing happens locally in your browser — we don't upload your files to a server." />
  <link rel="stylesheet" href="/assets/css/styles.css" />

  <!-- AdSense (keep this) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5493851170081090"
    crossorigin="anonymous"></script>

  <!-- PDF-Lib (client-side PDF split) -->
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
</head>

<body>
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <div class="logo">FT</div>
        <div>
          <div>Simple Web Tools <span class="badge">beta</span></div>
        </div>
      </div>

      <nav class="nav" aria-label="Legal">
        <a href="/legal/privacy.html">Privacy</a>
        <a href="/legal/terms.html">Terms</a>
        <a href="/legal/contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="layout">
      <aside class="sidebar">
    <div class="card">
      <div class="section-title">
        <h2>Categories</h2>
        <div class="hint">All tools</div>
      </div>

      <div class="cat-list">
        <a class="cat" href="/#pdf">PDF <small>3</small></a>
        <a class="cat" href="/#image">Image <small>2</small></a>
        <a class="cat" href="/#text">Text <small>1</small></a>
        <a class="cat" href="/#audio">Audio <small>1</small></a>
        <a class="cat" href="/#dev">Engineer <small>1</small></a>
      </div>
    </div>

    <div class="card" style="margin-top:14px;">
      <h2 style="margin-top:0;">Support</h2>
      <p style="color:var(--muted);margin:8px 0 0;">This site is supported by ads.</p>
      <div class="ad-slot" style="margin-top:12px;">Ad space</div>
    </div>
  </aside>

      <div class="main">
        <section class="hero">
          <h1>Split PDF</h1>
          <p>Split a PDF into single-page PDFs. Processing happens <strong>locally in your browser</strong> — we don’t upload your files to a server.</p>
          <div class="note">Tip: Large PDFs may take a little longer. Keep this tab open.</div>
        </section>

        <section class="grid" style="margin-top:16px;">
          <div class="card">
            <div class="ad-slot">Ad space (after AdSense approval)</div>
          </div>

          <div class="grid" style="grid-template-columns: 1fr 1fr; gap:16px;">
            <div class="card">
              <div class="section-title">
                <h2>1) Choose a PDF</h2>
                <div class="hint">Upload</div>
              </div>

              <div class="drop">
                <div class="kv">
                  <div style="font-weight:900;">Select a PDF file</div>
                  <div style="color:var(--muted);">We will export each page as a separate PDF.</div>
                  <div class="row" style="margin-top:8px;">
                    <input id="splitInput" type="file" accept="application/pdf" />
                  </div>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="section-title">
                <h2>2) Split</h2>
                <div class="hint">Download</div>
              </div>

              <button class="btn primary" id="splitBtn" type="button">Split & Download</button>

              <div class="progress" aria-label="Progress">
                <div id="bar"></div>
              </div>

              <p id="statusText" style="margin:10px 0 0;color:var(--muted);font-weight:700;">Ready.</p>

              <div style="margin-top:12px;">
                <div style="font-weight:900;margin-bottom:8px;">Downloads</div>
                <div id="outLinks" style="display:grid;gap:10px;"></div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      <div>© 2026 Simple Web Tools</div>
      <div>
        <a href="/legal/privacy.html">Privacy</a> ·
        <a href="/legal/terms.html">Terms</a> ·
        <a href="/legal/contact.html">Contact</a>
      </div>
    </div>
  </footer>


<script>
const fileInput = document.getElementById('fileInput');
const chooseBtn = document.getElementById('chooseBtn');
const clearBtn  = document.getElementById('clearBtn');
const splitBtn  = document.getElementById('splitBtn');
const fileName  = document.getElementById('fileName');
const rangeInput= document.getElementById('rangeInput');
const statusText= document.getElementById('statusText');

let file = null;

chooseBtn.onclick = e => { e.preventDefault(); fileInput.click(); };
clearBtn.onclick  = e => { e.preventDefault(); file=null; fileName.textContent=''; statusText.textContent='Ready.'; };

fileInput.onchange = e => {
  file = e.target.files[0] || null;
  fileName.textContent = file ? file.name : '';
};

function parseRanges(text, max){
  const pages = new Set();
  text.split(',').forEach(part=>{
    if(part.includes('-')){
      const [a,b] = part.split('-').map(x=>parseInt(x,10));
      for(let i=a;i<=b;i++) if(i>=1 && i<=max) pages.add(i-1);
    }else{
      const n = parseInt(part,10);
      if(n>=1 && n<=max) pages.add(n-1);
    }
  });
  return [...pages].sort((a,b)=>a-b);
}

splitBtn.onclick = async e => {
  e.preventDefault();
  if(!file){ alert('Choose a PDF first'); return; }

  try{
    statusText.textContent='Processing...';
    const bytes = await file.arrayBuffer();
    const pdf = await PDFLib.PDFDocument.load(bytes);
    const max = pdf.getPageCount();

    const indices = parseRanges(rangeInput.value || '1-'+max, max);
    const out = await PDFLib.PDFDocument.create();
    const pages = await out.copyPages(pdf, indices);
    pages.forEach(p=>out.addPage(p));

    const outBytes = await out.save();
    const blob = new Blob([outBytes], {type:'application/pdf'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'split.pdf';
    a.click();
    URL.revokeObjectURL(url);

    statusText.textContent='Done.';
  }catch(err){
    console.error(err);
    statusText.textContent='Error.';
  }
};
</script>
</body>
</html>
